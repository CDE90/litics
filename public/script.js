"use strict";!function(){function n(){if(-1!==window.history.pushState.toString().indexOf("locationchange"))return;let n=history.pushState;history.pushState=function(){let t=n.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),t};let t=history.replaceState;history.replaceState=function(){let n=t.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),n},window.addEventListener("popstate",(()=>{window.dispatchEvent(new Event("locationchange"))}))}function t(n){"localhost"!==window.location.hostname&&fetch("https://litics.ecwrd.com/api/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),mode:"no-cors"}).catch((n=>{console.error("Error:",n)}))}let e={hostname:window.location.hostname,pathname:window.location.pathname},o={hostname:null,pathname:null};function a(){if(o.pathname===window.location.pathname)return;console.log("Sending pageview data... "+window.location.hostname+window.location.pathname);t({type:"load",site:{hostname:window.location.hostname,pathname:window.location.pathname},referrer:{hostname:document.referrer?new URL(document.referrer).hostname:null,pathname:document.referrer?new URL(document.referrer).pathname:null},screenSize:window.screen.width+"x"+window.screen.height}),n(),o={hostname:window.location.hostname,pathname:window.location.pathname}}function i(){if(e.pathname===window.location.pathname)return;console.log("Sending exit data... "+e.hostname+e.pathname+" -> "+window.location.hostname+window.location.pathname);t({type:"exit",site:{hostname:e.hostname,pathname:e.pathname}}),n(),e={hostname:window.location.hostname,pathname:window.location.pathname}}n();const h=new Date;a(),window.addEventListener("beforeunload",(()=>i)),window.addEventListener("locationchange",(()=>{(new Date).getTime()-h.getTime()<1e3||(i(),a())})),window.addEventListener("hashchange",(()=>{window.dispatchEvent(new Event("locationchange"))}));setInterval((function(){if(console.log("Sending ping data... "+window.location.hostname+window.location.pathname),e.hostname!==window.location.hostname)return void window.dispatchEvent(new Event("locationchange"));t({type:"ping",site:{hostname:window.location.hostname,pathname:window.location.pathname}}),n()}),3e4)}();