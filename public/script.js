"use strict";!function(){function n(){if(-1!==window.history.pushState.toString().indexOf("locationchange"))return;let n=history.pushState;history.pushState=function(){let e=n.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),e};let e=history.replaceState;history.replaceState=function(){let n=e.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),n},window.addEventListener("popstate",(()=>{window.dispatchEvent(new Event("locationchange"))}))}function e(n){"localhost"!==window.location.hostname&&fetch("https://litics.ecwrd.com/api/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),mode:"no-cors"}).catch((n=>{console.error("Error:",n)}))}let t={hostname:window.location.hostname,pathname:window.location.pathname},o={hostname:null,pathname:null};function a(){if(o.pathname===window.location.pathname)return;console.log("Sending pageview data... "+window.location.hostname+window.location.pathname);e({type:"load",site:{hostname:window.location.hostname,pathname:window.location.pathname},referrer:{hostname:document.referrer?new URL(document.referrer).hostname:null,pathname:document.referrer?new URL(document.referrer).pathname:null},screenSize:window.screen.width+"x"+window.screen.height}),n(),o={hostname:window.location.hostname,pathname:window.location.pathname}}function i(){if(t.pathname===window.location.pathname)return;console.log("Sending exit data... "+t.hostname+t.pathname+" -> "+window.location.hostname+window.location.pathname);e({type:"exit",site:{hostname:t.hostname,pathname:t.pathname},inactiveTime:c}),n(),t={hostname:window.location.hostname,pathname:window.location.pathname},c=0}n();const w=new Date;let h=!0,c=0;a(),window.addEventListener("beforeunload",(()=>i)),window.addEventListener("locationchange",(()=>{(new Date).getTime()-w.getTime()<1e3||(i(),a())})),window.addEventListener("hashchange",(()=>{window.dispatchEvent(new Event("locationchange"))}));setInterval((()=>{h||c++}),1e3),window.addEventListener("focus",(()=>{h=!0})),window.addEventListener("blur",(()=>{h=!1}));setInterval((function(){if(console.log("Sending ping data... "+window.location.hostname+window.location.pathname),t.hostname!==window.location.hostname)return void window.dispatchEvent(new Event("locationchange"));e({type:"ping",site:{hostname:window.location.hostname,pathname:window.location.pathname},inactiveTime:c}),n(),c=0}),3e4)}();